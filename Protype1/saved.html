<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Saved Items</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="saved.css">
</head>
<body class="bg-neutral-50">

<header class="top-bar">
  <div class="brand-group">
    <div class="brand-logo">U</div>
    <div class="logo-title">University Marketplace</div>
  </div>

  <nav class="nav-bubbles" aria-label="Main navigation">
    <a href="messages.html" class="nav-bubble">ğŸ’¬ Messages</a>
    <a href="index.html" class="nav-bubble">ğŸ›’ Marketplace</a>
    <a href="seller-dashboard.html" class="nav-bubble">ğŸ“‹ My Listings</a>
    <a href="postitem.html" class="nav-bubble sell-button">â• Sell Item</a>
  </nav>

  <div class="top-actions">
    <div class="search-container">
      <input type="text" class="search-input" placeholder="Search saved items" aria-label="Search saved items">
      <button class="search-btn" aria-label="Search">ğŸ”</button>
    </div>
    <div class="top-icons">
      <a href="notifications.html" class="icon-bubble" aria-label="Notifications">ğŸ””</a>
      <a href="profile.html" class="icon-bubble" aria-label="Profile">ğŸ‘¤</a>
    </div>
  </div>
</header>

<main class="page-shell content-stack">
  <div class="section-header">
    <div>
      <h1 class="section-title">â¤ï¸ Saved Items</h1>
      <p class="muted">Your bookmarked listings in one place.</p>
    </div>
  </div>

  <section class="section-card">
    <div class="saved-grid" id="savedGrid"></div>
  </section>
</main>

<script>
  function loadSavedItems() {
    const grid = document.getElementById("savedGrid");
    const savedIds = JSON.parse(localStorage.getItem("savedItems")) || [];
    const items = JSON.parse(localStorage.getItem("marketplaceItems")) || [];

    const savedItems = items.filter(item => savedIds.includes(item.id));

    if (savedItems.length === 0) {
      grid.innerHTML = "<p class='muted'>You havenâ€™t saved any items yet.</p>";
      return;
    }

    grid.innerHTML = "";
    savedItems.forEach(item => {
      const card = document.createElement("div");
      card.classList.add("item-card");
      card.innerHTML = `
        ${item.sold ? '<div class="sold-overlay">SOLD</div>' : ""}
        <div class="listing-image-container">
          <img class="marketplace-image" src="${(item.images && item.images[0]) || item.image || 'https://via.placeholder.com/250x140'}" alt="${item.title}">
        </div>
        <div class="item-details">
          <strong>${item.title}</strong>
          <p>$${item.price} â€¢ ${item.address || item.zipcode || "N/A"}</p>
        </div>
      `;

      card.addEventListener("click", () => {
        localStorage.setItem("selectedItemId", item.id);
        window.location.href = "itemdetails.html";
      });

      grid.appendChild(card);
    });
  }

  loadSavedItems();
</script>

</body>
</html>
